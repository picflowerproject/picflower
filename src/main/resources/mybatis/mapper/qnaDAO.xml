<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.picflower.dao.IqnaDAO">

  <insert id="insertQna">
    INSERT INTO qna (q_no, m_no, q_content, q_date, q_status)
    VALUES (qna_seq.NEXTVAL, #{m_no}, #{q_content}, SYSDATE, '0')
  </insert>

  <select id="selectAllQna" resultType="com.picflower.dto.QnaDTO">
    SELECT
      q.q_no,
      q.m_no,
      q.q_content,
      q.q_answer,
      q.q_date,
      q.q_status,
      m.m_id
    FROM qna q
    LEFT JOIN member m ON q.m_no = m.m_no
    ORDER BY q.q_no DESC
  </select>

  <select id="selectMyQna" parameterType="int" resultType="com.picflower.dto.QnaDTO">
    SELECT q_no, m_no, q_content, q_answer, q_date, q_status
    FROM qna
    WHERE m_no = #{value}
    ORDER BY q_no DESC
  </select>

  <update id="updateQnaAnswer">
    UPDATE qna
    SET
      q_answer = #{q_answer},
      q_status = '1'
    WHERE q_no = #{q_no}
  </update>

  <!-- ✅✅ 삭제 (추가) : int 단일 파라미터는 #{value} -->
  <delete id="deleteQna" parameterType="int">
    DELETE FROM qna
    WHERE q_no = #{value}
  </delete>

</mapper>
